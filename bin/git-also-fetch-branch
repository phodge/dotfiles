#!/usr/bin/env bash
fail() {
        echo "$@" >&2
        exit 1
}

# TODO: support remotes with names other than "origin"
remote=origin
branch="$1"

test -e .git || fail "Not in a git repo?"
test -n "$branch" || fail "Usage: $0 <branch>"

git config --add "remote.$remote.fetch" "+refs/heads/${branch}:refs/remotes/$remote/${branch}"
